# 2017项目总结

## 1. 打包工具的优化

 * 1.1 过程
  - 硬着头皮看代码(不想人工打包, 想理解后优化和拓展功能), 大概一天.
  - 找到不能自动化的部分, lua脚本的加密(暴露接口), apk的导出(**BuildPipeline**的API的使用).
  - 后续功能的拓展, 设计心里学, 多个项目按钮添加序号排列和快速搜索(眼盲找不到), 按目的分类(Android线上包, 测试包, ios, PC等).
 * 1.2 反思
  - 代码很混乱, 对新手不友好.
  - IOS的功能添加? SVN的自动化? 理想的状态通过web打包, 自动上传ftp. 现实的拘束:对IOS不熟悉, 公司没时间给我研究. 项目的svn插件已经在PC上通过**cmd**调用**TortoiseSVN**实现.
  - 科学上网很好用, Google很好用, Unity Official Document很好用.

## 2. 右键导表

 * 2.1 先前的反人类设计. 我导一个表为什么要加载所有的Excel表再选择一个表导出(当有一个不相干的表被**WPS**打开时会因为文件权限原因导致工具失败)? 创房时要手动从一个表copy配置写入到另外一个 表(**#**符号分割的运用), 因为先前的Excel插件支持读不支持写.
 * 2.2 我需要找一个支持读写的Excel插件.
  > google, github找了三个星期(每个星期花一两个小时).
  > 插件的API封装和修改, (同原作者的思路差不多, 同时更具有健壮性)
 * 2.3 右键上下文菜单的添加.
  > google, **StackOverflow**到Unity的blog.
  > 自己摸索.
 * 2.4 Excel转Lua.
  > 重新实现了一遍.
 * 2.5 反思
   - 坚持就是胜利.
   - 还是要看代码, 还是要写代码, 没想象中的难.
   - 多个Excel表的右键导出, 列数据的唯一性.
   - 没考虑到的数据类型, 现在只支持number, string类型到lua配置, 可能支持更多的Lua类型更好, 比如bool, table.
   - 没必要实现的需求. Excel表打开的过程中不能导表, 有超链接不能导表.

## 3. 新版本热更新
 * 3.1 使用更多的C#特性和其他考虑.
  - **LINQ**(Language Integrated Query).以更加快捷和抽象的方式去操作数组等集合类型数据.
  - File, IO, Stream. 文件的操作.
  - 加密和解密. 使用对称加密DES, 效率相对于非对称加密更好.
  - 系列化(Serialization)和反序列化(Deserialization). C# 数据结构和**XML**之间的互相转换. 
  - 下载. 之前使用WWW, 后面使用更好的BestHttps插件来下载.
  - 哈希表. 热更完后会建立所有AssetBundle配置哈希表, 以有限的时间内读取到你想要的assetBundle配置.
  - 任意时候的断线重连下载(手机闪退). 每下载一个文件成功后都要写入配置文件(写入存储卡的话大概是成功10个)

 * 3.2 反思
  - 对网络的不熟悉踩了很多坑, 如http url要有特殊的格式, (文件有空格或中文等特殊字符, WWW会下载不了), http缓存等.
  - 让测试更快更便捷, 在自己的机器上架设http服务器用来下载AssetBundle. 加很多的Log. 工具类(如下载和加密)都简单的测试一下.
  - 设计和实现很容易推翻.(多线程下载, 客户端合并配置文件)\
  - 图集.
  
## 4. 大的预设加载
  - Unity Profiler定位问题. 场景切换慢是因为加载PlayingPanel和RoomPanel这两个预设很慢导致.
  - 大的预设在热更新后, 通过异步的方式提前加载, (Resource.LoadAsync, AssetBundle.LoadAssetAsync).

## 5. 读的书

- 5.1 今年读的书
  - 人类简史
  - 未来简史
  - 斯坦福极简经济学
  - 少一人走的路
  - The Art of Readable code

- 5.2 最有影响力的书
  + 暗时间
  + 黑客与画家
  + 娱乐至死
  + 你干嘛在乎别人怎么想

## 6. 要学的知识(2018)
- OpenGL
- Computer Network
  

